import os
from pathlib import Path
import urllib.request
from pathlib import Path

if 'PROSTDIR' in os.environ: prostdir = os.environ['PROSTDIR']
else: prostdir = str(Path.home())+'/.config/prost'
if not os.path.exists(prostdir): os.makedirs(prostdir)


if not os.path.exists(prostdir+'/traced_esm1b_25_13.pt'):
    print("Downloading ESM1b weights")
    link='https://dl.boxcloud.com/d/1/b1!jQxGsee34ADh1jTBIWLtDYjF84hkm7VMdjaw_tzJxLa2QrE2AW4vumY0DLCSbnV3NCT1GMUgcKjBcAaPlqYP0D03Zk0jF5zJd3ctvlOuqmHGjMfF1_u9we6QZnq8RAjwvtvXL1x5CZ7TtXIQmRE6Ix79mwjLZ_VSPYiiCa1fciO1cMHmU9NrgCaTbT-zXLh2Ge1MCVmtY2ynmTIy2mlMQfFfehU3XtNEkTOzw54m2QwN8Q6gwlgGG-RgUSKwEkYMIrgRta-q_Mw0X-6SUSWaxXlfFEs2ADgiRRb4FI8wWb5p2fBh-mIUzjZZMVmzaps4oxXhhnd7j4V69aI2R9aGhaP3OGmsm4qnuQba4FP3IjzW2lVSxtaepJvLq-kJG4u5WLGf5_LB07hM6oXY0e7b6Prc_1LRmwk4Lvnp2Bdnkxl9S3oHkNBzMVsDPtTEy5OK9Rt7nfKcmRvVMnW43KnpmG33lB1MK7ZPxgaspRfaj5BCEH5UCIpjzLzFXFwNUM8bmccp3TxuILCYp469kegjrC8f2JXsuQZgHlWcshyNrJH-WO47QnKdRpmps6NgWkTGz4cLxmUVN6kw4WRPPuwsQa-_emWSmSoXNKic_Zeu4FpJej6gln7Rlu-uCvLdYmBsXAtbTYW9Z4hdNgP4UjuWV2ak3RPeozuKtg1k9S2RuIv8ejavKvSOMu7fCvUWkIOzw4hBVXETs1DPcu48P1l17KSKwtQ68HfIXhA4_J3jDj_oGgWiWzy9waG2BBJkGUJnG1DoLpCETE4bT5f3XeEOxV3cOlKvfbL3x7GoTevJSVFOahqFw25hiwYpEz7Q43TLs2vmgcOB9YLrAYrLa904GXzfMMn-51oeeQ_WYcellonRePaFPWSzvFB4obrdXLrVUOHMlBBrWp2GnLq4s24KxTRv28mkBD4p5Sx8Kz7TMjd9Uu0I-1cyRXe5XnmJg3UVe_HPehTnryGaILouRaLbEK4IDaFx3iVO-CIo6ROJrHtbyW8S9SV7RPsjvbtBK_Dr1BpzsbG_FXvSZSGMMj5cULk5TQQLsnaxueir3xqFGIO510VyYiNiPVrN_UKTo8UlUx2P5pkr0bfHbyp5BGUD_r1PifMwGMDbCN5JqwozKayZWBPedvj0XsyXHP2gatsdpgpxC_bmg5txU6Mn2_kKoH9HtdLc36i2VUKmtPZMeDFSQvm83AG1O2xZ-AV2j5EkStuBJ6bAEpHGeCsaYyC2I_eTBn1iQnZ9vE7z4bbz_srGVwvd-9L3HwnX8_zCuvCF-h_opdA6euMaBhMrpmneHdzqbpvpffgZ37YOKCv4VU8hrxf-bq-vSLLwQa3uiIA0MTLBl7UXey7rSNEzvL-RiNExj2ft3XzXP2eW_nZOYl3nqEKf4fSBkwLPVwt0ID8wdC8A--k5SpWL1RVEQ-2H57pIJd5qfCfFVzu4m2li/download'
    urllib.request.urlretrieve(link, prostdir+'/traced_esm1b_25_13.pt')
    print("Done.")

if not os.path.exists(prostdir+'/cache.pkl'):
    print("Downloading PROST cache")
    link='https://dl.boxcloud.com/d/1/b1!UHDVL9ll3hV7hEp_wp8DpqbVTRvwRoYAnEQUpXp6skoHytgup9aB-pdUDkbb2khw2wHay0HRCgJJ3K7glCDUQcWQg8TtgYb0ys5CHMuTZ45mL9NdcYoF1VSuqnxNIODWRdHUPS1DHOlrTiSgpmAHYH6hNoFWYEdEFVTfFlz2h21AbrZ7HCKoRzzkFG-As5PWky8Nje53KBxu8JVxZgtP_YmiDi0TDqQ8LV_xPbJ3oajUerVrW9JI_7Y04p94alVH9Pxf_2B-R4qA1N4uUxzebHTCatinBiHLTcfFV9jZcFGszM9f3c-t8TI-iaYE8pOFS-LuMx4N57OykwKNMgDuEojfM5wOQZ_2KJrmtgWWzGVV_fk_H4EcvrG9c9oed-Tboe-ctvK2xhdZP4s1ekRHXEQp6gUcu-jntlEgn_O2GDekkFsALF0_OBeT9uuXlf2WoqKveAElAFBOdPkYM6IpA4yNTb8Uw4_xhrGj-4QKZ6EO8qObgoGZXhQXLyG2LmwTS1kS_xx63Yh1rPIne03pLRSagy6z5rQVDSSRwkdB81xzaGlrxVLDWR4yDDprhXS2K_Kwuq6dU5mT7kWnbj5m1lLynJy20ulq-fPBsjXzMJdgxi_bha5Yb2i1PTMHqq1ixXZbuw9dnMJ9eYVkwLHdpNZCf_dfK-9NClP94iMA34nisyDaqR2tm6IRo2Lik-PGfnvQgdJWjlFzuly7KHqUFQQy5m0esAvfKkjCoiUKyUOtXwzg0fdx3GmxHmkW4cD-rgR6g7EuZfI0ZT00hRISF_nrRcAt4yG_R9RiLF5fu2sOFe0LAf0so0qO6h0fYWmrTShhau9fMLVZWwhvetU5C0g9ZMsq83id-crUGdOYnyTiJilfN2HZlZfKeE7yqVi3GTCDWs4Ka_7nfk5sVfdhuZgOzNzg44O903nU8gLolBcbCCCn6d91RhOHmY6mYFSmlgrrGqDHmIAAbFkv7nqAxoSTlTTF1pkmkrQEodPtNmXX7M1-VsFuQpG3oTE1Y62Fb7A_tRMU0K9zYtjzerZeLpyvGeEIUwwENnaRAYSCXjaVnQqWYQi4UnEuTEOGyBQ21oy3ieVpF0yPogFLI78By4FSW_k8zt1zK7dC6-XfAu_JwA2H0YGoD2rYsGuZ7Sr0K9nCbeWuaQScz1FlUbP3-slXe8fCFardhojaPNertq5AGdap4HOSAyIQvPAzKGgDALpPaKnC5j1Q5UkVpG212jul4DKAqCf1VShe4Ki_HvHekoHrUOq6_Pvpp_UIj8YUgO5t3xec42afAqFeUEKbuUEkvo2hHsA9zQmQDCQnGBIFw3swCEbmRByKPtlyRj-dLCRTrv3oTkuXCuysH0yOjt1NcX1oL09FE7alyKextL9nuk9FA8yJ/download'
    urllib.request.urlretrieve(link, prostdir+'/cache.pkl')
    print("Done.")
    
from .prosttools import quantSeq
